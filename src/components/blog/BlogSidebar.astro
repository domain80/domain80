---
import { Icon } from "astro-icon/components";
import Button from "../ui/Button.astro";
import ThemeToggle from "../ui/ThemeToggle.astro";

interface Props {
  allTags: { tag: string; count: number }[];
  totalPosts: number;
}

const { allTags, totalPosts } = Astro.props;
---

<div class="space-y-6">
  <!-- Back to Home -->
  <div class="flex gap-8 items-center">
    <a
      href="/"
      class="inline-flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-accent dark:hover:text-accent transition-colors"
    >
      <Icon name="tabler:arrow-left" class="w-4 h-4" />
      Home
    </a>

    <!-- Theme Toggle -->
    <ThemeToggle />
  </div>
  <!-- Page Title -->
  <h1 class="text-5xl font-bold text-zinc-900 dark:text-zinc-100">All Posts</h1>

  <!-- CTA Buttons -->
  <div class="flex flex-wrap gap-3">
    <Button href="mailto:work.davidmainoo@gmail.com" variant="outline">
      <Icon name="tabler:message-circle" class="w-4 h-4" />
      Let's talk
    </Button>
    <a
      href="/rss.xml"
      class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 transition-colors rounded-lg"
    >
      <Icon name="tabler:rss" class="w-4 h-4" />
      Subscribe via RSS
    </a>
  </div>

  <!-- Tag Filters -->
  <div class="pt-6 border-t border-zinc-200 dark:border-zinc-800">
    <div id="tag-list" class="flex flex-wrap gap-2">
      {
        allTags.map(({ tag, count }) => (
          <button
            type="button"
            data-tag={tag}
            data-active="false"
            class="px-3 py-1.5 text-xs rounded-full ring-1 ring-zinc-400 dark:border-zinc-800 bg-transparent text-zinc-900 dark:text-zinc-400 hover:bg-zinc-100/50 dark:hover:bg-zinc-800/50 transition-all duration-300 cursor-pointer data-[active=true]:ring-accent data-[active=true]:text-accent data-[active=true]:font-mediu "
          >
            {tag}
          </button>
        ))
      }
    </div>
  </div>

  <!-- Search Input -->
  <div>
    <input
      type="text"
      id="blog-search"
      placeholder="Search..."
      class="w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-600 bg-white/50 dark:bg-zinc-900/50 backdrop-blur-sm text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 transition-colors"
    />
  </div>

  <!-- Pagination -->
  <nav class="flex items-center justify-between" aria-label="Pagination">
    <button
      id="prev-page"
      type="button"
      class="px-3 py-1.5 text-sm text-zinc-700 dark:text-zinc-300 hover:text-accent dark:hover:text-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      Previous
    </button>

    <div id="page-numbers" class="flex gap-2">
      <!-- Page numbers will be rendered by JavaScript -->
    </div>

    <button
      id="next-page"
      type="button"
      class="px-3 py-1.5 text-sm text-zinc-700 dark:text-zinc-300 hover:text-accent dark:hover:text-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      Next
    </button>
  </nav>

  <!-- Social Links and Resume -->
  <div class="pt-6 border-t border-zinc-200 dark:border-zinc-800 space-y-4">
    <div class="flex items-center gap-4">
      <a
        href="https://github.com/domain80"
        target="_blank"
        rel="noopener noreferrer"
        class="text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors"
        aria-label="GitHub"
      >
        <Icon name="tabler:brand-github" class="w-6 h-6" />
      </a>
      <a
        href="https://linkedin.com/in/DavidMainoo"
        target="_blank"
        rel="noopener noreferrer"
        class="text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors"
        aria-label="LinkedIn"
      >
        <Icon name="tabler:brand-linkedin" class="w-6 h-6" />
      </a>
    </div>

    <a
      href="https://docs.google.com/document/d/1MFkGhhAN17oxTCcDf2UoClBh9HRJLTgJfKRj_TrW908/edit?usp=sharing"
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-accent dark:hover:text-accent transition-colors"
    >
      My resume →
    </a>
  </div>

  <!-- Copyright -->
  <p
    class="text-xs text-zinc-500 dark:text-zinc-500 pt-6 border-t border-zinc-200 dark:border-zinc-800"
  >
    © Copyright 2025, David Mainoo.
  </p>
</div>
