---
import { Icon } from "astro-icon/components";
import Badge from "../ui/Badge.astro";

interface Props {
  title: string;
  description: string;
  year: string;
  endYear?: string;
  tags: string[];
  link?: string;
  linkText?: string;
  slug: string;
  image?: string;
  status?: string;
  showImage?: boolean;
}

const { title, description, year, endYear, tags, link, linkText, slug, image, status, showImage = true } =
  Astro.props;
const yearRange = endYear ? `${year} - ${endYear}` : year;
---

<article class="group space-y-4">
  <!-- Image or placeholder -->
  {image ? (
    <div class="aspect-video max-h-80 bg-zinc-300 dark:bg-zinc-800 rounded-lg overflow-hidden">
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover"
      />
    </div>
  ) : showImage && (
    <div class="aspect-video max-h-80 bg-zinc-300 dark:bg-zinc-800 rounded-lg overflow-hidden">
      <div class="w-full h-full flex items-center justify-center">
        <Icon
          name="tabler:photo"
          class="w-12 h-12 text-zinc-400 dark:text-zinc-600"
        />
      </div>
    </div>
  )}

  <!-- Content -->
  <div class="space-y-3">
    <div>
      <div class="flex items-center gap-2 mb-1">
        <h4 class="text-base font-semibold text-zinc-900 dark:text-zinc-100">
          {title} - {yearRange}
        </h4>
        {status && (
          <Badge variant="amber" pill>{status}</Badge>
        )}
      </div>

      <!-- Tech tags -->
      <div class="flex flex-wrap gap-2 mb-2">
        {tags.map((tag) => <Badge variant="tech">{tag}</Badge>)}
      </div>
    </div>

    <p class="text-zinc-700 dark:text-zinc-300 leading-relaxed">
      {description}
    </p>

    {
      link && (
        <a
          href={link}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-1 text-sm text-accent hover:text-accent-dark transition-colors"
        >
          <span>{linkText || "View project â†’"}</span>
          <Icon name="tabler:external-link" class="w-4 h-4" />
        </a>
      )
    }
  </div>
</article>
